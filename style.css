/* ========================================================================
   FONTS
   ======================================================================== */
@import url('https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@300;400;500&family=Orbitron:wght@500;700&family=VT323&display=swap');

/* ========================================================================
   GLOBAL RESET
   ======================================================================== */
html, body, .stApp {
    margin: 0 !important;
    padding: 0 !important;
    background: #00010A;
    color: #00f6ff;
    font-family: 'Roboto Mono', monospace;
}
#MainMenu, footer, header {visibility: hidden;}

/* ========================================================================
   GLOBAL SCANLINES
   ======================================================================== */
.scanlines {
    pointer-events: none;
    position: fixed;
    inset: 0;
    background: repeating-linear-gradient(
      to bottom,
      rgba(255,255,255, 0.04) 0px,
      rgba(255,255,255, 0.04) 1px,
      rgba(0,0,0,0.05) 2px
    );
    mix-blend-mode: soft-light;
    opacity: 0.22;
    z-index: 999;
}

/* ========================================================================
   INTRO MAEGIA (NOIR FIX)
   ======================================================================== */
#introScreen {
    position: fixed;
    inset: 0;
    background: #000;
    z-index: 999999999; /* ok */
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;

    opacity: 1;

    /* La ligne suivante FORCE l'intro à disparaître */
    animation: introFadeFix 0.8s forwards;
    animation-delay: 1.8s;
}

@keyframes introFadeFix {
    0%   { opacity: 1; }
    100% { opacity: 0; visibility: hidden; display:none; }
}


.intro-logo {
    font-family: Orbitron, sans-serif;
    font-size: 46px;
    color: #C86BFA;
    animation: neonIntro 3s infinite ease-in-out;
}
.intro-sub {
    margin-top: 10px;
    font-size: 16px;
    opacity: 0.8;
}
@keyframes neonIntro {
  0% { filter: drop-shadow(0 0 4px #C86BFA); }
  50% { filter: drop-shadow(0 0 16px #FF7BFA); }
  100% { filter: drop-shadow(0 0 4px #C86BFA); }
}
@keyframes introFadeOut {
    0% { opacity: 1; }
    100% { opacity: 0; visibility: hidden; }
}

/* ========================================================================
   NODE CARDS + TILT 3D
   ======================================================================== */
.node-card {
    border: 1px solid rgba(0,246,255,0.5);
    border-radius: 12px;
    padding: 14px;
    margin-bottom: 14px;
    background: radial-gradient(circle at top,
        rgba(0,246,255,0.07),
        rgba(0,0,0,0.85));
    box-shadow: 0 0 14px rgba(0,246,255,0.2);
    transition: transform 0.15s ease-out, box-shadow 0.15s ease-out;
    transform-style: preserve-3d;
}
.node-card:hover {
    box-shadow: 0 0 18px rgba(0,246,255,0.5);
}
.node-active {
    border-color: #ff53d3 !important;
    box-shadow: 0 0 22px rgba(255,83,211,0.8) !important;
}
.node-title {
    font-family: Orbitron, sans-serif;
    letter-spacing: 0.12em;
    font-size: 14px;
    margin-bottom: 4px;
}
.node-url {
    opacity: 0.7;
    font-size: 11px;
}

/* ========================================================================
   RIGHT PANEL SCROLL
   ======================================================================== */
.right-panel-scroll {
    max-height: calc(100vh - 20px);
    overflow-y: auto;
    padding-right: 6px;
}
.right-panel-scroll::-webkit-scrollbar { width: 6px; }
.right-panel-scroll::-webkit-scrollbar-thumb {
    background: #00f6ff;
    border-radius: 6px;
}

/* ========================================================================
   CYBERSANDBOX (IFRAME)
   ======================================================================== */
.cybersandbox-frame {
    position: relative;
    width: 100%;
    border-radius: 16px;
    border: 2px solid rgba(0,246,255,0.8);
    background: #000;
    box-shadow:
        0 0 22px rgba(0,246,255,0.4),
        inset 0 0 14px rgba(255,0,212,0.2);
    overflow: hidden;
}
.cybersandbox-frame iframe {
    width: 100%;
    border: none;
    position: relative;
    z-index: 5;
}

/* FULLSCREEN BUTTON */
.cyber-fullscreen-btn {
    position: absolute;
    top: 14px;
    right: 14px;
    background: rgba(0,246,255,0.25);
    border: 1px solid #00f6ff;
    color: #00f6ff;
    padding: 6px 12px;
    font-family: 'Roboto Mono', monospace;
    border-radius: 8px;
    cursor: pointer;
}

/* ========================================================================
   WARP TRANSITION
   ======================================================================== */
.warp-transition {
    animation: cyberWarp 0.6s ease-out;
}
@keyframes cyberWarp {
    0% {opacity:0; filter:blur(8px) brightness(0.4); transform:scale(1.05);}
    40%{opacity:1; filter:blur(2px) brightness(1.4); transform:scale(1.02);}
    100%{opacity:1; filter:none; transform:scale(1);}
}

/* ========================================================================
   MODE HOLO
   ======================================================================== */
.cyber-holo {
    filter: drop-shadow(0 0 8px #00f6ff) brightness(1.1);
}
.cyber-holo-active {
    animation: holoPulse 3s infinite ease-in-out;
}
@keyframes holoPulse {
    0% { filter: drop-shadow(0 0 8px #00f6ff); }
    50% { filter: drop-shadow(0 0 16px #ff00de); }
    100% { filter: drop-shadow(0 0 8px #00f6ff); }
}

/* ========================================================================
   MODE HARDCORE
   ======================================================================== */
.cyber-hardcore {
    animation:
        glitch .25s infinite steps(2,end),
        rgbSplit 1.7s infinite ease-in-out;
}
@keyframes glitch {
    0%{transform:translate(0);}
    20%{transform:translate(-3px,2px);}
    40%{transform:translate(3px,-2px);}
    60%{transform:translate(-2px,1px);}
    80%{transform:translate(2px,-1px);}
    100%{transform:translate(0);}
}
@keyframes rgbSplit {
    0%,100% { filter:none; }
    25% { filter:hue-rotate(20deg); }
    50% { filter:saturate(1.5); }
    75% { filter:hue-rotate(-20deg); }
}

/* ========================================================================
   MODE HACKER GLOBAL (terminal vert)
   ======================================================================== */
body.hacker, .stApp.hacker {
    background: #000 !important;
    color: #00FF66 !important;
    font-family: 'VT323', monospace !important;
    letter-spacing: 0.03em;
}
.hacker input, .hacker textarea, .hacker button {
    background: #000 !important;
    color: #00FF66 !important;
    border: 1px solid #00FF66 !important;
}
.hacker .node-card {
    border: 1px solid #00FF66 !important;
    box-shadow: 0 0 12px #00FF66 !important;
}
.hacker .cybersandbox-frame {
    border: 2px solid #00FF66 !important;
    box-shadow: 0 0 22px #00FF66;
}
.hacker-mode iframe {
    filter:
      grayscale(1)
      brightness(0.8)
      contrast(1.6)
      hue-rotate(80deg);
}

/* ========================================================================
   MODE HACKER ELITE (CRT ++)
   ======================================================================== */
.hacker-elite-mode {
    border: 2px solid #00FF33 !important;
    box-shadow: 0 0 32px #00FF33;
    filter: contrast(1.4) brightness(0.8);
    overflow: hidden;
    position: relative;
}
.hacker-elite-mode::before {
    content:"";
    position:absolute;
    inset:0;
    background: radial-gradient(circle,rgba(0,255,127,0.2),transparent 75%);
    animation: eliteGlow 2s infinite alternate;
    z-index:12;
}
@keyframes eliteGlow {
    0%{opacity:0.1;}
    100%{opacity:0.35;}
}
.hacker-elite-mode iframe {
    filter: grayscale(1) contrast(2) hue-rotate(75deg);
    animation: eliteGlitch 2s infinite;
}
@keyframes eliteGlitch {
    0%{clip-path: inset(0 0 0 0);}
    50%{clip-path: inset(6% 0 15% 0);}
    100%{clip-path: inset(0 0 0 0);}
}

/* ========================================================================
   THEME PURPLE
   ======================================================================== */
body.purple, .stApp.purple {
    background: radial-gradient(circle at top, #2D0045 0, #0E0016 50%, #000) !important;
    color: #C86BFA;
}
.purple .node-card {
    border-color: #C86BFA !important;
    box-shadow: 0 0 18px rgba(200,107,250,0.5) !important;
}
.purple .cybersandbox-frame {
    border-color: #C86BFA !important;
    box-shadow: 0 0 22px rgba(200,107,250,0.4),
                inset 0 0 14px rgba(255,0,212,0.1) !important;
}

/* ========================================================================
   FLUX DATA MATRIX
   ======================================================================== */
.data-matrix {
    position: absolute;
    inset: 0;
    pointer-events: none;
    background: repeating-linear-gradient(
        to bottom,
        rgba(0,255,0,0.12) 0px,
        rgba(0,255,0,0.12) 2px,
        rgba(0,0,0,0) 3px
    );
    animation: dataFlow 0.45s linear infinite;
    z-index: 14;
}
@keyframes dataFlow {
    from { background-position-y: 0; }
    to   { background-position-y: 60px; }
}

/* ========================================================================
   FULLWINDOW EXIT BUTTON
   ======================================================================== */
.fw-exit {
    position: fixed;
    top: 20px;
    left: 20px;
    z-index: 99999;
}
.fw-exit button {
    background: rgba(0,246,255,0.2);
    border: 1px solid #00f6ff;
    padding: 6px 12px;
    color: #00f6ff;
    border-radius: 10px;
    font-family: 'Roboto Mono';
}
